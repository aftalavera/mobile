<?phpclass Afiliados extends CI_model{	public function __construct()	{		parent::__construct();		$this->load->database('indicePNP');	}		public function get_electores()	{		$query = $this->db->query('select count(*) total from indicepnp');		$result=$query->row();				$result->total=number_format($result->total);		return $result;	}		public function get_afiliados()	{		$query = $this->db->query('select count(*) total from indicepnp where elector=1');		$result=$query->row();				$result->total=number_format($result->total);		return $result;	}		public function get_summary()	{		$query = $this->db->query('select f.firstgeocode precinto,name,count(*) total from firstgeodivision f left join indicepnp i on f.firstgeocode=i.firstgeocode where elector=1 group by f.firstgeocode');		$result=$query->result();				foreach ($result as $row){			$row->precinto = str_pad($row->precinto,3,0,STR_PAD_LEFT);			$row->total = number_format($row->total);		}		return $result;	}		public function get_detail()	{		$query = $this->db->query('select firstgeocode precinto,secondgeocode unidad,count(*) total from indicepnp where elector=1 group by firstgeocode,secondgeocode');		$result=$query->result();				foreach ($result as $row){			$row->precinto = str_pad($row->precinto,3,0,STR_PAD_LEFT);			$row->unidad = str_pad($row->unidad,2,0,STR_PAD_LEFT);			$row->total = number_format($row->total);		}		return $result;	}	public function fetch_electores($start,$limit)	{			$query = $this->db->query('select * from indicepnp where elector = ? limit ?,?',array(1,$start,$limit));		return $query->result();	}		public function get_total_precinto()	{		$query = $this->db->query('select firstgeocode precinto,count(*) total from indicepnp where elector=1 group by firstgeocode');		$result=$query->result();				foreach ($result as $row){			$row->precinto = str_pad($row->precinto,3,0,STR_PAD_LEFT);			$row->total = number_format($row->total);		}		return $result;	}}		